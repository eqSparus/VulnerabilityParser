plugins {
    id 'java'
    id 'application'
    id "com.github.johnrengelman.shadow" version "7.1.2"
}

group 'org.example'
version '1.0-SNAPSHOT'

java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(16)
    }
}

mainClassName = 'ru.parser.Main'

jar{
    manifest{
        attributes "Main-Class": mainClassName
    }
}

shadowJar{
    baseName = "app"
}

tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
}

repositories {
    mavenCentral()
}

ext {
    lombokVersion = '1.18.22'
    junitVersion = '5.8.2'
    logbackVerison = '1.2.7'
    log4jVersion = '2.17.1'
    janinoVersion = '3.1.6'
    jsopVersion = '1.14.3'
    apachePoiVersion = '5.2.0'
}

dependencies {

    //JUnit 5
    testImplementation group: 'org.junit.jupiter', name: 'junit-jupiter-api', version: junitVersion
    testImplementation group: 'org.junit.jupiter', name: 'junit-jupiter-engine', version: junitVersion

    //Lombok
    compileOnly group: 'org.projectlombok', name: 'lombok', version: lombokVersion
    annotationProcessor group: 'org.projectlombok', name: 'lombok', version: lombokVersion
    //JSOUP
    implementation group: 'org.jsoup', name: 'jsoup', version: jsopVersion
    //Apache Poi
    implementation group: 'org.apache.poi', name: 'poi', version: apachePoiVersion


    //Logging stack
    //SLF4J
    implementation group: 'org.apache.logging.log4j', name: 'log4j-core', version: log4jVersion
    //Logback
    implementation group: 'ch.qos.logback', name: 'logback-classic', version: logbackVerison
    implementation group: 'ch.qos.logback', name: 'logback-core', version: logbackVerison
    //Janino
    implementation group: 'org.codehaus.janino', name: 'janino', version: janinoVersion
}

test {
    useJUnitPlatform()
}